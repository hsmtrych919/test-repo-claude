name: Slack Notification

on:
 issues:
   types: [closed]

jobs:
 notify:
   if: |
     github.event.action == 'closed' && 
     github.event.issue.state_reason == 'completed' &&
     (contains(github.event.issue.body, '@claude') || contains(github.event.issue.title, '@claude'))
   runs-on: ubuntu-latest
   steps:
     - name: Send Slack notification
       uses: 8398a7/action-slack@v3
       with:
         status: success
         text: "ğŸ‰ Claudeä½œæ¥­å®Œäº†ï¼ ${{ github.event.issue.html_url }} ã§ã€ŒCreate PRã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã­"
       env:
         SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
